# CLAUDE.md - AI Development Team Configuration

## AI Team Configuration (autogenerated by team-configurator, 2025-11-10)

**Important: YOU MUST USE subagents when available for the task.**

### Detected Tech Stack

**Backend:**
- Framework: Medusa v2.0 (Node.js + TypeScript)
- Database: PostgreSQL
- Cache/Queue: Redis
- Testing: Jest with 80% coverage target
- Code Quality: SOLID principles, Clean Code practices

**Frontend (Planned):**
- Framework: Next.js 14 with App Router
- Styling: Tailwind CSS (cyberpunk theme)
- Testing: Vitest, Playwright

**Blockchain:**
- Platform: Polygon (Matic)
- Smart Contracts: Solidity
- Testing: Hardhat

**Infrastructure:**
- Containerization: Docker
- CI/CD: GitHub Actions
- Node Version: >= 20.x

**Custom Modules to Build:**
1. Raffle Module - Ticket management, draws, winners
2. Blockchain Module - Web3 integration, smart contracts
3. POD Module - Printful/Printify integration
4. Brazil Module - Shipping (Melhor Envio), Payment (PIX/Mercado Pago), Fiscal (NFe)

### AI Team Assignments

| Task Category | Agent | Notes |
|--------------|-------|-------|
| **Backend Development** | backend-developer | Medusa v2 modules, TypeScript services, business logic, custom workflows |
| **API Design & Contracts** | api-architect | RESTful API design, route definitions, OpenAPI specs, versioning |
| **Frontend Development** | react-nextjs-expert | Next.js 14 App Router, SSR/SSG/ISR, React components, client/server patterns |
| **UI Styling & Components** | tailwind-css-expert | Tailwind v4, responsive design, cyberpunk theme, utility-first CSS |
| **Blockchain & Smart Contracts** | backend-developer | Solidity contracts, Web3.js/Ethers.js integration, Polygon deployment |
| **Testing & QA** | testing-expert | Jest unit tests, integration tests, Playwright E2E, Hardhat contract tests |
| **Code Review** | code-reviewer | MANDATORY before merging - Security, SOLID principles, clean code validation |
| **Performance Optimization** | performance-optimizer | Database queries, caching strategies, bundle optimization, load testing |
| **Documentation** | documentation-specialist | Bilingual docs (EN/PT-BR), API references, architecture guides |
| **DevOps & Infrastructure** | devops-cicd-expert | Docker configs, GitHub Actions workflows, deployment automation |
| **Security & Compliance** | security-expert | Authentication, payment security, smart contract audits, NFe compliance |
| **Project Orchestration** | tech-lead-orchestrator | Complex features, architectural decisions, multi-agent coordination |


### Agent Collaboration Workflow

#### 1. New Feature Development Flow

User Request → tech-lead-orchestrator (analyzes & breaks down)
    ├─→ api-architect (designs contracts)
    │   └─→ backend-developer (implements Medusa modules)
    │       └─→ testing-expert (writes tests)
    │
    ├─→ react-nextjs-expert (builds UI)
    │   └─→ tailwind-css-expert (styles components)
    │       └─→ testing-expert (E2E tests)
    │
    └─→ code-reviewer (MANDATORY review)
        └─→ documentation-specialist (updates docs)
            └─→ Feature Complete

#### 2. Custom Module Development (Raffle, Blockchain, POD, Brazil)

Module Requirements → api-architect (defines module API)
    └─→ backend-developer (implements module structure)
        ├─→ For Blockchain: Web3 integration, smart contracts
        ├─→ For POD: Printful/Printify API integration
        └─→ For Brazil: Melhor Envio, PIX, Mercado Pago, NFe
            └─→ testing-expert (module tests + integration tests)
                └─→ code-reviewer (security & architecture review)
                    └─→ documentation-specialist (bilingual module docs)

#### 3. Bug Fix & Refactoring Flow

Bug Report → backend-developer OR react-nextjs-expert (fixes/refactors)
    └─→ testing-expert (regression tests)
        └─→ code-reviewer (validates fix quality)

#### 4. Performance Issues

Performance Concern → performance-optimizer (identifies bottlenecks)
    ├─→ Database: optimizes queries, indexes
    ├─→ Frontend: bundle analysis, code splitting
    └─→ Backend: caching, async processing
        └─→ testing-expert (load tests)
            └─→ code-reviewer (validates changes)

#### 5. Security Concerns

Security Issue → security-expert (vulnerability assessment)
    ├─→ Payment integration security
    ├─→ Smart contract auditing
    ├─→ API authentication/authorization
    └─→ Data encryption
        └─→ backend-developer (implements fixes)
            └─→ testing-expert (security tests)
                └─→ code-reviewer (final validation)

### Handoff Protocols

#### When to Delegate Between Agents

1. **tech-lead-orchestrator → Specialists**
   - Trigger: Complex features, architectural decisions, multi-module work
   - Handoff: After breaking down into discrete tasks with clear boundaries
   - Max parallel: 2 agents at a time

2. **api-architect → backend-developer**
   - Trigger: API contract is defined and approved
   - Handoff: OpenAPI/GraphQL spec + resource models ready
   - backend-developer implements according to spec

3. **backend-developer → testing-expert**
   - Trigger: Feature code complete
   - Handoff: Provide module paths, test scenarios, expected coverage
   - testing-expert writes comprehensive test suite

4. **react-nextjs-expert → tailwind-css-expert**
   - Trigger: Component structure is built, styling needed
   - Handoff: Component files, design requirements, theme tokens
   - tailwind-css-expert applies utility-first styling

5. **Any Developer → code-reviewer**
   - Trigger: MANDATORY before any PR/merge to main
   - Handoff: Changed files, test results, coverage reports
   - code-reviewer performs security-aware quality gate review

6. **code-reviewer → security-expert**
   - Trigger: Security concerns flagged during review
   - Handoff: Specific files/patterns with security implications
   - security-expert performs deep security audit

7. **code-reviewer → performance-optimizer**
   - Trigger: Performance issues detected in review
   - Handoff: Problematic code paths, metrics if available
   - performance-optimizer profiles and optimizes

8. **Any Agent → documentation-specialist**
   - Trigger: Feature complete, API changes, new modules
   - Handoff: Implementation details, API contracts, user flows
   - documentation-specialist creates/updates bilingual docs


### Development Standards (Enforced by code-reviewer)

#### Mandatory Requirements
- SOLID principles followed
- Clean Code practices applied
- TypeScript strict mode enabled
- Minimum 80% test coverage
- Conventional commits format
- Bilingual documentation (EN/PT-BR)
- Code review approval before merge
- No security vulnerabilities
- Performance benchmarks met

#### Code Review Checklist (code-reviewer)
1. Security: No exposed secrets, proper auth/authz, input validation
2. Architecture: SOLID principles, proper separation of concerns
3. Testing: Unit + integration tests, 80%+ coverage
4. Performance: No N+1 queries, proper caching, optimized bundles
5. Documentation: Code comments, API docs, README updates
6. Style: TypeScript strict mode, conventional commits
7. Accessibility: WCAG 2.1 AA compliance (frontend)
8. Localization: Bilingual support where applicable

### Agent-Specific Guidelines

#### backend-developer (Medusa v2 Specialist)
- Follow Medusa v2 module patterns
- Use Medusa workflows for complex operations
- Implement custom modules in src/modules/
- Follow Medusa dependency injection patterns
- Use Medusa events for cross-module communication
- Web3 Integration: Use Ethers.js or Web3.js for blockchain interactions

#### react-nextjs-expert
- Use Next.js 14 App Router exclusively
- Server Components by default, Client Components only when needed
- Implement proper loading/error states
- Use Next.js Image component for optimization
- Follow React Server Components best practices

#### tailwind-css-expert
- Follow cyberpunk theme guidelines
- Use Tailwind v4 features (container queries, OKLCH colors)
- Implement responsive design (mobile-first)
- Create reusable utility patterns
- Maintain design system consistency

#### testing-expert
- Unit tests: Jest for backend, Vitest for frontend
- Integration tests: Medusa test utilities
- E2E tests: Playwright for user flows
- Contract tests: Hardhat for smart contracts
- Target: 80%+ coverage on all modules

#### security-expert
- Focus areas: Payment security (PIX, Mercado Pago)
- Smart contract security (Solidity best practices)
- API authentication/authorization
- Data encryption at rest and in transit
- NFe fiscal compliance requirements

#### documentation-specialist
- All docs in both English and Portuguese (PT-BR)
- Update README.md for major features
- Maintain API documentation
- Create module-specific docs in docs/modules/
- Keep architecture diagrams current

### Quick Start Commands

#### Backend Development
# Start development
@backend-developer implement the Raffle Module with ticket purchase and draw logic

# Design API first
@api-architect design the Raffle Module API endpoints

# Review code
@code-reviewer review the raffle module implementation

#### Frontend Development
# Build UI
@react-nextjs-expert create the raffle ticket purchase page

# Style components
@tailwind-css-expert apply cyberpunk theme to raffle components

#### Testing & Quality
# Write tests
@testing-expert create unit and integration tests for the Raffle Module

# Optimize performance
@performance-optimizer analyze and optimize raffle draw algorithm

# Security audit
@security-expert audit the blockchain payment integration

#### Infrastructure
# Setup CI/CD
@devops-cicd-expert configure GitHub Actions for automated testing and deployment

# Update docs
@documentation-specialist create bilingual documentation for the Brazil Module

#### Complex Features
# Coordinate multi-module feature
@tech-lead-orchestrator implement the complete blockchain raffle system with frontend


### Project-Specific Contexts

#### Medusa v2 Custom Modules
Located in src/modules/, each module should follow this structure:

src/modules/raffle/
├── models/           # Data models
├── services/         # Business logic
├── repositories/     # Data access
├── workflows/        # Complex operations
├── subscribers/      # Event handlers
├── __tests__/        # Module tests
└── index.ts          # Module exports

#### Brazilian Market Integrations
- Payment: PIX (instant), Mercado Pago (gateway)
- Shipping: Melhor Envio API integration
- Fiscal: NFe (Nota Fiscal Eletronica) generation
- Currency: BRL (Brazilian Real)

#### Blockchain Integration
- Network: Polygon (Matic) mainnet
- Smart Contracts: Solidity 0.8.x
- Testing: Hardhat local network
- Libraries: Ethers.js or Web3.js
- Wallet: MetaMask integration

---

## Project Overview (User Documentation)

### About USE Nerd

USE Nerd is a modern e-commerce platform built for the Brazilian market, featuring an innovative blockchain-based raffle system. The platform combines Medusa v2.0 commerce capabilities with Next.js 14 for a cutting-edge storefront and Polygon blockchain for transparent raffle mechanics.

### Vision

Create a trustworthy, engaging e-commerce experience where customers can purchase products and participate in blockchain-verified raffles with complete transparency.

### Target Market

Brazilian consumers interested in:
- E-commerce shopping with local payment methods (PIX, Mercado Pago)
- Blockchain-verified raffles and contests
- Transparent, verifiable draw mechanics
- Modern, cyberpunk-themed UI/UX

### Key Differentiators

1. Blockchain Transparency: All raffles verified on Polygon blockchain
2. Local Payment Methods: PIX instant payments, Mercado Pago integration
3. Fiscal Compliance: Automatic NFe generation
4. Modern Tech Stack: Medusa v2 + Next.js 14 + Polygon
5. Print-on-Demand: Integrated with Printful/Printify

---

**Configuration Version**: 1.0  
**Last Updated**: 2025-11-10  
**Configured By**: team-configurator agent  
**Project**: USE Nerd E-commerce Platform
